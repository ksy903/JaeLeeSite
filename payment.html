<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, height=device-height" />
        <link rel="icon" href="http://www.origami-resource-center.com/images/paper-Crane-wiki.jpg">
        <link rel="apple-touch-icon" sizes="57x57" href="57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="144.png" />
        <title>Payroll Calc</title>
    </head>
    <body >
        <div id="head" style="height:20%; background-color:#f27f65;">
            <center>
            <div id="head-title" style="padding:3px;font-size:9vh;">
                Payroll Calculator
            </div>
            <center>
        </div>
        
        <div id="body" style="height:1600px; background-color:#57f9cb;line-height: 1;">
            <center>
			<!--
            <div id="head-title" style="font-size:5vh; margin: 0;padding: 0;border: 0;font-size: 200%;">
			
                <table>
                <tr>
                    <th>
                    <input type="number" style="font-size:5vh; width:15vh; height:5vh;" class="userIO" id="hour"></input>
                    </th>
                    <th>
                    <p>Hours</p>
                    </th>
                </tr>
                <tr>
                    <th>
                    <input type="number" style="font-size:5vh; width:15vh; height:5vh;" class="userIO" id="minute"></input>
                    </th>
                    <th>
                    <p>Minute</p>
                    </th>
                </tr>
                <tr>
                    <th>
                    <input type="number" style="font-size:5vh; width:15vh; height:5vh;" class="userIO" id="payrate"></input>
                    </th>
                    <th>
                    <p>Payrate</p>
                    </th>
                </tr>
                </table>
                <button onclick="calculateTax();" style="height:40px; width:80px;">Calculate</button>
                
                <table>
                <tr>
                    <th>
                    <p>Total:</p>
                    </th>
                    <th>
                    <p class="userIO2" id="x">0.00</p>
                    </th>
                </tr>
                <tr>
                    <th>
                    <p>Tax (0.076):</p>
                    </th>
                    <th>
                    <p class="userIO2" id="y">0.00</p>
                    </th>
                </tr>
                <tr>
                    <th>
                    <p>Final Total:</p>
                    </th>
                    <th>
                    <p class="userIO2" id="z">0.00</p>
                    </th>
                </tr>
                </table>
            </div>
            
			-->
			<div id="head-title" style="font-size:5vh; margin: 0;padding: 0;border: 0;font-size: 200%;">
				<table>
					<tr>
                        <th>
                            <h3>시작 시간(시, 분):</h3>
                        </th>
					</tr>
					<tr>
						<th>
						<input type="number" style="font-size:5vh; width:15vh; height:5vh;" class="userIO" id="start_hour"></input>
						</th>
						<th>
						<p>시</p>
						</th>
					</tr>
					<tr>
						<th>
						<input type="number" style="font-size:5vh; width:15vh; height:5vh;" class="userIO" id="start_minute"></input>
						</th>
						<th>
						<p>분</p>
						</th>
					</tr>
					<tr>
						<th>
						<select id="start_select">
							<option value="start_am">오전</option>
							<option value="start_pm">오후</option>
						</select>
						</th>
					</tr>
					<tr>
                        <th>
                            <h3>끝 시간(시, 분):</h3>
                        </th>
					</tr>
					<tr>
						<th>
						<input type="number" style="font-size:5vh; width:15vh; height:5vh;" class="userIO" id="end_hour"></input>
						</th>
						<th>
						<p>시</p>
						</th>
					</tr>
					<tr>
						<th>
						<input type="number" style="font-size:5vh; width:15vh; height:5vh;" class="userIO" id="end_minute"></input>
						</th>
						<th>
						<p>분</p>
						</th>
					</tr>
					<tr>
						<th>
						<select id="end_select">
							<option value="end_am">오전</option>
							<option value="end_pm">오후</option>
						</select>
						</th>
					</tr>
                </table>
                <button onclick="calculateHours();" style="height:40px; width:80px;">더하기</button>
				
				<h3>시간: <div id="time_result" class="userIO2">00:00</div></h3>
				
                
                <input type="number" style="font-size:5vh; width:15vh; height:5vh;display:inline-block;" class="userIO2" id="hourlyrate"></input>
				<p style="display:inline-block;font-weight:bold">시간당 $</p>
                <br>
                <button onclick="calculatePay();" style="height:40px; width:80px;">계산</button>
                <br>
                <h3>합계: <div id="pay_result" class="userIO2">$0.00</div></h3>
			</div>
			</center>
        </div>
        <script type="text/javascript">
            var finalH=0, finalM=0;
            
            /*
            function calculateTax(){
                var hr, min, pay, tot, tax, fin;
                hr = document.getElementById("hour").value;
                min = document.getElementById("minute").value;
                pay = document.getElementById("payrate").value;
                console.log(hr + " " + min + " " + pay);
                min = min * 0.01;
                tot = (hr + min) * pay;
                tax = tot * 0.076;
                fin = tot - tax;
                
                document.getElementById("x").innerHTML = tot.toFixed(2);
                document.getElementById("y").innerHTML = tax.toFixed(2);
                document.getElementById("z").innerHTML = fin.toFixed(2);
            }
            */
            
			function calculateHours(){
				var startH = parseInt(document.getElementById("start_hour").value);
				var startM = parseInt(document.getElementById("start_minute").value);
				var endH = parseInt(document.getElementById("end_hour").value);
				var endM = parseInt(document.getElementById("end_minute").value);
				var startHalf = parseInt(document.getElementById("start_select").selectedIndex);
				var endHalf = parseInt(document.getElementById("end_select").selectedIndex);
				
				console.log(startH + " " + startM + " " + endH + " " + endM + " " + startHalf  + " " + endHalf);
				
				if(startHalf == 1 && startH != 12){
					startH += 12;
				}
				if(endHalf == 1 && endH != 12){
					endH += 12;
				}
				
				console.log(startH + " " + startM + " " + endH + " " + endM + " " + startHalf  + " " + endHalf);
				
				if(endM - startM < 0){
					finalH += ((endH - startH) - 1);
					finalM += 60 - (startM - endM);
					
				}
				else{
					finalH += (endH - startH);
					finalM += (endM - startM);
				}
				
				console.log(finalH + " " + finalM);
				
                removeHrFromMin();
				document.getElementById("time_result").innerHTML = (("0" + finalH).slice(-2)) + ":" + (("0" + finalM).slice(-2));
                clearFields();
			}
			
			function clearFields(){
				var inputsToClear = document.getElementsByClassName('userIO');
			    
				for(var i=0;i<inputsToClear.length;i++){
					inputsToClear[i].value = "";
				}
			}
            
            function removeHrFromMin(){
                while(finalM >= 60){
                    finalM -= 60;
                    finalH++;
                }
            }
            
            function calculatePay(){
                var hourlyrate=parseInt(document.getElementById("hourlyrate").value);
                var finalPay = 0.0;
                
                finalPay += hourlyrate * finalH;
                console.log(finalPay);
                finalPay += hourlyrate * (finalM / 60);
                console.log(finalPay);
                
                document.getElementById("pay_result").innerHTML = ("$" + finalPay +"00");
            }
        </script>
    </body>
</html>
